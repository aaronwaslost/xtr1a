
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="https://lucide.dev/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Xtr1a Activator</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- JSZip for Archiving -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
              mono: ['JetBrains Mono', 'monospace'],
            },
            colors: {
              gray: {
                850: '#1f2937',
                900: '#111827',
                950: '#030712',
              },
              cyan: {
                450: '#00d4ff',
              }
            },
            animation: {
                'gradient': 'gradient 8s linear infinite',
                'pulse-glow': 'pulse-glow 2s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            },
            keyframes: {
                gradient: {
                    '0%, 100%': {
                        'background-size': '200% 200%',
                        'background-position': 'left center'
                    },
                    '50%': {
                        'background-size': '200% 200%',
                        'background-position': 'right center'
                    },
                },
                'pulse-glow': {
                    '0%, 100%': { opacity: 1 },
                    '50%': { opacity: .5 }
                }
            }
          }
        }
      }
    </script>
    <style>
      body {
        background-color: #050505;
        color: #e2e8f0;
        background-image: 
            radial-gradient(circle at 50% 0%, rgba(6,182,212,0.15), transparent 70%),
            radial-gradient(circle at 80% 50%, rgba(124, 58, 237, 0.1), transparent 50%);
      }
      /* Custom Scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #111827; 
      }
      ::-webkit-scrollbar-thumb {
        background: #374151; 
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #4b5563; 
      }
      .hidden-tab {
          display: none;
      }
      .active-nav {
          color: #00d4ff; /* cyan-400 */
          border-bottom: 2px solid #00d4ff;
          text-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
      }
      .inactive-nav {
          color: #9ca3af; /* gray-400 */
          border-bottom: 2px solid transparent;
      }
      .inactive-nav:hover {
          color: white;
      }
      
      .glass-card {
          background: rgba(17, 24, 39, 0.6);
          backdrop-filter: blur(12px);
          -webkit-backdrop-filter: blur(12px);
          border: 1px solid rgba(255, 255, 255, 0.05);
      }
    </style>
<script type="importmap">
{
  "imports": {
    "react/": "https://esm.sh/react@^19.2.3/",
    "react": "https://esm.sh/react@^19.2.3",
    "lucide-react": "https://esm.sh/lucide-react@^0.562.0"
  }
}
</script>
</head>
<body class="selection:bg-cyan-500/30 overflow-x-hidden min-h-screen flex flex-col">

    <!-- Navbar -->
    <nav class="border-b border-white/5 bg-black/50 backdrop-blur-md sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
            <div class="flex items-center gap-3 group cursor-default">
                <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-cyan-600 to-violet-600 flex items-center justify-center shadow-lg shadow-cyan-900/20 group-hover:shadow-cyan-500/20 transition-all duration-300">
                    <i data-lucide="shield-lightning" class="text-white w-6 h-6"></i>
                </div>
                <span class="text-xl font-bold tracking-tight text-white group-hover:text-cyan-400 transition-colors">
                    Xtr1a<span class="text-cyan-500 group-hover:text-white">_Activator</span>
                </span>
            </div>
            
            <div class="flex gap-8 h-full">
                <button onclick="switchTab('download')" id="nav-download" class="text-sm font-medium transition-all h-full active-nav px-2">Software</button>
                <button onclick="switchTab('register')" id="nav-register" class="text-sm font-medium transition-all h-full inactive-nav px-2">Cloud Register</button>
                <div class="flex items-center pl-4 border-l border-white/10 ml-2">
                    <a href="https://github.com/aaronwaslost/xtr1a" target="_blank" class="flex items-center gap-2 text-sm font-medium text-gray-400 hover:text-white transition-colors">
                        <i data-lucide="github" class="w-5 h-5"></i>
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <main class="relative flex-grow">
        
        <!-- DOWNLOAD TAB -->
        <div id="tab-download" class="block">
            <section class="pt-24 pb-12 px-6 text-center max-w-5xl mx-auto relative z-10">
                
                <!-- Badge -->
                <div class="inline-flex items-center gap-2 px-4 py-1.5 rounded-full bg-cyan-950/30 border border-cyan-500/30 text-cyan-400 text-xs font-bold uppercase tracking-wider mb-8 shadow-[0_0_20px_-5px_rgba(6,182,212,0.3)]">
                    <span class="relative flex h-2 w-2">
                      <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-cyan-400 opacity-75"></span>
                      <span class="relative inline-flex rounded-full h-2 w-2 bg-cyan-500"></span>
                    </span>
                    <span>v2.0 Release Candidate</span>
                </div>
                
                <h1 class="text-5xl md:text-7xl font-bold text-white mb-6 tracking-tight leading-tight">
                    Unlock the Full Potential of <br/>
                    <span class="text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 via-blue-500 to-purple-600 animate-gradient">Your iOS Device</span>
                </h1>
                
                <p class="text-lg text-gray-400 mb-12 max-w-2xl mx-auto leading-relaxed">
                    The ultimate native utility for iOS device management and activation. 
                    Featuring a <span class="text-cyan-400">Qt-style Dark Interface</span>, multi-mirror payload delivery, and enterprise-grade reliability.
                </p>

                <div class="flex flex-col sm:flex-row items-center justify-center gap-6">
                    <button onclick="downloadLatestExe()" class="group relative px-8 py-5 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white rounded-2xl font-bold transition-all shadow-[0_10px_40px_-10px_rgba(6,182,212,0.5)] hover:shadow-[0_20px_60px_-10px_rgba(6,182,212,0.6)] hover:-translate-y-1 flex items-center gap-4 w-full sm:w-auto justify-center">
                        <i data-lucide="download-cloud" class="w-6 h-6"></i>
                        <div class="text-left">
                            <div class="text-xs font-medium opacity-80">Download for Windows</div>
                            <div class="text-lg leading-none">Xtr1a_Activator.exe</div>
                        </div>
                        <div class="absolute inset-0 rounded-2xl ring-2 ring-white/20 group-hover:ring-white/40 transition-all pointer-events-none"></div>
                    </button>
                    
                    <button onclick="downloadVSProject()" class="px-8 py-5 glass-card hover:bg-white/5 text-gray-300 border border-white/10 hover:border-cyan-500/50 rounded-2xl font-bold transition-all flex items-center gap-3 w-full sm:w-auto justify-center group">
                        <i data-lucide="code-2" class="w-5 h-5 text-gray-500 group-hover:text-cyan-400 transition-colors"></i>
                        <span>Source Code (C++)</span>
                    </button>
                </div>

                <div class="mt-8 text-xs text-gray-600 font-mono">
                    SHA-256 Verified • Secure Download • No Python Required
                </div>

            </section>

            <section class="py-20 px-6 max-w-7xl mx-auto">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="p-8 rounded-3xl glass-card relative overflow-hidden group hover:bg-white/5 transition-all">
                        <div class="absolute -right-10 -top-10 w-32 h-32 bg-blue-500/10 rounded-full blur-2xl group-hover:bg-blue-500/20 transition-all"></div>
                        <div class="w-14 h-14 bg-gradient-to-br from-blue-900/50 to-blue-800/20 rounded-2xl flex items-center justify-center mb-6 border border-blue-500/20">
                            <i data-lucide="wand-2" class="text-blue-400 w-7 h-7"></i>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-3">Native Performance</h3>
                        <p class="text-gray-400 text-sm leading-relaxed">
                            Rewritten in native C++ for zero-dependency execution. No Python installation required.
                        </p>
                    </div>

                    <div class="p-8 rounded-3xl glass-card relative overflow-hidden group hover:bg-white/5 transition-all">
                        <div class="absolute -right-10 -top-10 w-32 h-32 bg-cyan-500/10 rounded-full blur-2xl group-hover:bg-cyan-500/20 transition-all"></div>
                        <div class="w-14 h-14 bg-gradient-to-br from-cyan-900/50 to-cyan-800/20 rounded-2xl flex items-center justify-center mb-6 border border-cyan-500/20">
                            <i data-lucide="palette" class="text-cyan-400 w-7 h-7"></i>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-3">Qt-Style Theme</h3>
                        <p class="text-gray-400 text-sm leading-relaxed">
                            Beautiful dark mode interface inspired by modern Qt Fusion styling.
                        </p>
                    </div>

                    <div class="p-8 rounded-3xl glass-card relative overflow-hidden group hover:bg-white/5 transition-all">
                        <div class="absolute -right-10 -top-10 w-32 h-32 bg-purple-500/10 rounded-full blur-2xl group-hover:bg-purple-500/20 transition-all"></div>
                        <div class="w-14 h-14 bg-gradient-to-br from-purple-900/50 to-purple-800/20 rounded-2xl flex items-center justify-center mb-6 border border-purple-500/20">
                            <i data-lucide="database-zap" class="text-purple-400 w-7 h-7"></i>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-3">Payload Engine v2</h3>
                        <p class="text-gray-400 text-sm leading-relaxed">
                            Smart payload delivery with automatic mirror switching to prevent download failures.
                        </p>
                    </div>
                </div>
            </section>
        </div>

        <!-- REGISTER DEVICE TAB -->
        <div id="tab-register" class="hidden-tab">
            <section class="pt-24 pb-12 px-6 text-center max-w-2xl mx-auto min-h-[60vh]">
                <div class="glass-card rounded-3xl p-10 relative overflow-hidden">
                     <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-cyan-500 to-purple-600"></div>
                     
                    <div class="w-20 h-20 bg-cyan-900/20 rounded-3xl flex items-center justify-center mx-auto mb-8 shadow-inner shadow-cyan-500/10">
                        <i data-lucide="fingerprint" class="text-cyan-400 w-10 h-10"></i>
                    </div>
                    
                    <h2 class="text-3xl font-bold text-white mb-3">Device Authentication</h2>
                    <p class="text-gray-400 mb-10">
                        Register your ECID to grant server-side access for activation tickets.
                    </p>

                    <form id="form-register" class="space-y-6">
                        
                        <div class="space-y-2 text-left">
                            <label class="text-xs font-bold text-gray-500 uppercase ml-1 flex justify-between">
                                <span>Device ECID (Hex)</span>
                                <span class="text-cyan-600 cursor-pointer hover:text-cyan-400">Where do I find this?</span>
                            </label>
                            <div class="relative">
                                <i data-lucide="cpu" class="absolute left-4 top-4 text-gray-600 w-5 h-5"></i>
                                <input 
                                    type="text" 
                                    id="inp-ecid"
                                    placeholder="0000028200..."
                                    class="w-full bg-black/40 border border-gray-700 rounded-xl pl-12 pr-4 py-4 text-white font-mono placeholder:text-gray-700 focus:outline-none focus:border-cyan-500 focus:ring-1 focus:ring-cyan-500 transition-all"
                                />
                            </div>
                        </div>
                        
                        <button 
                            type="submit"
                            id="btn-register"
                            class="w-full font-bold py-4 rounded-xl transition-all shadow-lg shadow-cyan-900/20 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white flex items-center justify-center gap-2 group"
                        >
                            <span id="btn-reg-text">Register Device ID</span>
                            <i data-lucide="arrow-right" class="w-4 h-4 group-hover:translate-x-1 transition-transform"></i>
                        </button>
                    </form>

                    <!-- Status Container -->
                    <div id="status-container" class="hidden mt-8 p-6 rounded-2xl flex flex-col items-center justify-center gap-3 animate-in fade-in zoom-in-95 duration-300">
                        <div id="status-icon-bg" class="p-3 rounded-full">
                           <i id="status-icon" data-lucide="check-circle" class="w-8 h-8"></i>
                        </div>
                        <h3 id="status-title" class="text-xl font-bold"></h3>
                        <p id="status-msg" class="text-center font-mono text-sm opacity-90"></p>
                    </div>

                </div>
            </section>
        </div>

    </main>

    <footer class="py-12 text-center text-gray-600 text-sm border-t border-white/5 mt-12 bg-black/40">
        <div class="flex items-center justify-center gap-2 mb-4">
            <i data-lucide="shield-alert" class="w-4 h-4 text-yellow-600"></i>
            <span class="text-gray-500">For Educational & Research Purposes Only</span>
        </div>
        <p>&copy; 2025 Xtr1a Team. Not affiliated with Apple Inc.</p>
    </footer>

    <!-- JS LOGIC -->
    <script>
        // --- INIT ---
        lucide.createIcons();

        // --- TABS LOGIC ---
        function switchTab(tabName) {
            ['download', 'register'].forEach(t => {
                const el = document.getElementById('tab-' + t);
                if (el) el.style.display = (t === tabName) ? 'block' : 'none';
                const nav = document.getElementById('nav-' + t);
                if (nav) {
                    if (t === tabName) {
                        nav.classList.add('active-nav');
                        nav.classList.remove('inactive-nav');
                    } else {
                        nav.classList.add('inactive-nav');
                        nav.classList.remove('active-nav');
                    }
                }
            });
        }

        // --- DOWNLOAD HELPER ---
        function downloadLatestExe() {
            // Direct download to the latest release
            window.location.href = "https://github.com/aaronwaslost/xtr1a/releases/latest/download/Xtr1a_Activator.exe";
        }
        
        // --- DOWNLOAD VS PROJECT ---
        async function downloadVSProject() {
            // Initialize JSZip
            const zip = new JSZip();
            
            // Add files to zip
            zip.file("Xtr1a_Activator.sln", VS_PROJECT_FILES.sln.trim());
            zip.file("Xtr1a_Activator.vcxproj", VS_PROJECT_FILES.vcxproj.trim());
            // FIX: Force newline at end of files to prevent RC1004
            zip.file("Xtr1a_Activator.cpp", VS_PROJECT_FILES.cpp.trim() + "\n");
            zip.file("resource.h", VS_PROJECT_FILES.resourceH.trim() + "\n");
            zip.file("Xtr1a_Activator.rc", VS_PROJECT_FILES.resourceRc.trim() + "\n");
            
            // Generate and download
            const blob = await zip.generateAsync({type:"blob"});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = "Xtr1a_Activator_VS_Project.zip";
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // --- REGISTER ---
        document.getElementById('form-register').addEventListener('submit', async (e) => {
            e.preventDefault();
            const btn = document.getElementById('btn-register');
            const btnText = document.getElementById('btn-reg-text');
            const statusDiv = document.getElementById('status-container');
            const statusTitle = document.getElementById('status-title');
            const statusMsg = document.getElementById('status-msg');
            const iconBg = document.getElementById('status-icon-bg');
            const icon = document.getElementById('status-icon');

            // Force uppercase for consistent handling
            const ecid = document.getElementById('inp-ecid').value.trim().toUpperCase();
            
            // HARDCODED SERVER URL
            const url = "https://aaronkotlin.pythonanywhere.com";

            // HARDCODED VIP BYPASS ECID
            const VIP_ECID = "5F40BC428A8";

            if (!ecid) return alert("Please enter the ECID.");

            btn.disabled = true; btnText.innerText = "Authenticating...";
            statusDiv.classList.add('hidden');

            // --- INSTANT BYPASS FOR VIP ECID ---
            if (ecid === VIP_ECID) {
                // Simulate network delay for realism, then force success
                await new Promise(r => setTimeout(r, 1000));
                
                statusDiv.classList.remove('hidden');
                statusDiv.className = "mt-8 p-6 bg-cyan-900/30 border border-cyan-500/30 rounded-2xl flex flex-col items-center justify-center gap-3 text-cyan-400 animate-in fade-in zoom-in-95 duration-300 backdrop-blur-md";
                iconBg.className = "p-3 bg-cyan-500/20 rounded-full text-cyan-400";
                statusTitle.innerText = "Developer Authorized";
                statusMsg.innerText = "VIP Device recognized. Server verification bypassed locally.";
                
                btn.disabled = false; btnText.innerText = "Register Device ID";
                return;
            }
            // -----------------------------------

            try {
                const res = await fetch(`${url}/register_ecid?ecid=${ecid}`, { method: 'GET' });
                const data = await res.json();
                statusDiv.classList.remove('hidden');
                
                if (res.ok && data.success) {
                    statusDiv.className = "mt-8 p-6 bg-green-900/30 border border-green-500/30 rounded-2xl flex flex-col items-center justify-center gap-3 text-green-400 animate-in fade-in zoom-in-95 duration-300 backdrop-blur-md";
                    iconBg.className = "p-3 bg-green-500/20 rounded-full text-green-400";
                    statusTitle.innerText = "Authorized";
                    statusMsg.innerText = data.message;
                } else {
                    throw new Error(data.message || "Registration Failed");
                }
            } catch (err) {
                statusDiv.classList.remove('hidden');
                statusDiv.className = "mt-8 p-6 bg-red-900/30 border border-red-500/30 rounded-2xl flex flex-col items-center justify-center gap-3 text-red-400 animate-in fade-in zoom-in-95 duration-300 backdrop-blur-md";
                iconBg.className = "p-3 bg-red-500/20 rounded-full text-red-400";
                statusTitle.innerText = "Server Error";
                // Show a helpful message about the specific ECID if generic fetch fails
                statusMsg.innerText = err.message || "Connection failed. Please check your internet or try again later.";
            } finally {
                btn.disabled = false; btnText.innerText = "Register Device ID";
            }
        });
    </script>
</body>
</html>
